<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
     <style>
       * {
	box-sizing: border-box;
     margin: 0;
     padding: 0;
}
nav{
    display: flex;
    justify-content: space-between;
    padding: 20px;
}
ul{
    display: flex;
    gap: 20px;
} 
ul li{
    list-style: none;
}
/* #modall {
    display: none;
} */
    </style>
</head>
<body>
     <!-- <input id="inputColor" onchange="changeBg(event)" type="color" > -->
      <section>
        <nav>
            <div class="logo">
                <img src="Frame 38 (1).png" alt="">
            </div>
            <ul>
                <li>Home</li>
                <li>profile</li>
                <li>Blog</li>
                <li>About us</li>
            </ul>
          
        <button onclick="showModal()">LogOut</button>
    <div id="modall">
        <h3>Are you sure you want to logout</h3>
        <button onclick="logout()" class="btn">YES</button>
        <button class="btn">NO</button>
    </div>
            <!-- <button>Log out</button> -->
        </nav>
        <h1 id="userName">loading.......</h1>

        <input onchange="pickPicture(event)" id="inputFile" type="file" accept=".jpeg,.jpg,.png">
     <img style="width: 2000 ; height: 200px;"  id="profilePreview" src="" alt="">
     <button onclick="updateProfilePicture()">Update profile picture</button>

    </section>
     <!-- <input onchange="pickPicture(event)" id="inputFile" type="file" accept=".jpeg,.jpg,.png">
     <img style="width: 2000 ; height: 200px;"  id="profilePreview" src="user icon.jpg" alt="">
     <button onclick="updateProfilePicture()">Update profile picture</button> -->
</body>
</html>
<script>
    let profile_url = "";
    let getData = JSON.parse(localStorage.getItem('usersData')) || []; 
    let currentUsersIndex = localStorage.getItem('currentUsersIndex');
    let currentUser = getData[Number(currentUsersIndex)];
    profilePreview.src = currentUser.profile_pix ? currentUser.profile_pix : "user icon.jpg"
    // profile_preview.src = currentUser.profile_pix ? currentUser.profile_pix : "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT_WWS9qIG7ewcmlbMpxnnFyMSv6dHqpVU9lQ&s"

    
    
    let userName =document.getElementById('userName')
    let modal = document.getElementById('modall')
    modal.style.display ='none'


     if (!currentUsersIndex || !currentUser) {
    location.href = 'E-comerce-login.html';
   } else {
    userName.innerHTML = currentUser.username;
    userName.style.color = 'brown';
}
function showModal() {
     modal.style.display = 'block'
    
}
function logout() {
    if (confirm('Are you sure you want to logout?')) {
        localStorage.removeItem('currentUsersIndex');
        location.href = 'E-comerce-login.html';
    }
}
    

    // function changeBg(ev) {
    //     console.log(ev);
    //     document.body.style.backgroundColor = ev.target.value  
    // }
function pickPicture(ev) {
    let file = ev.target.files[0];
    let reader = new FileReader();

    reader.addEventListener('load', (e)=>{
        profile_url = e.target.result
        console.log(profile_url);
        profilePreview.src = profile_url
        
    })
    if (file) {
        reader.readAsDataURL(file);
        
    }
    // console.log(ev.target.file);
   
}
  function updateProfilePicture() {
        console.log(profile_url);
        if (!profile_url) {
            alert('please select a picture to upload')
            return;
        }
}


</script>